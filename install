#!/bin/bash

platform=`uname`

ensure_installed() {
  if is_installed $1; then
    return 0
  fi

  if is_installed apt-get; then
    apt-get update && apt-get install $1 -y
  else
    echo "Please make sure git and curl are installed"
    exit 1
  fi
}

function is_installed {
  if [[ -z "$(which $1)" ]]; then
    return 1
  fi

  return 0
}

ensure_installed zsh
ensure_installed git
ensure_installed curl

cd $HOME
git clone https://github.com/g13013/env-bootstrap.git
cd env-bootstrap
curl https://raw.githubusercontent.com/g13013/env-bootstrap/master/install-prezto | zsh
curl https://raw.githubusercontent.com/g13013/env-bootstrap/master/install-dev-tools | bash

tee -a ~/.zmodules <<EOF
zstyle ':prezto:load' pmodule \
  'fasd' \
  'archive' \
  'autosuggestions' \
  'rsync' \
  'tmux' \
  'git' \
  'environment' \
  'terminal' \
  'editor' \
  'history' \
  'directory' \
  'spectrum' \
  'utility' \
  'completion' \
  'prompt'
EOF

